# Go Backend Development Sandbox Template
# Used for hiring assessments and training tasks
# Uses code-server (VS Code in browser)

name: backend-go
description: "Go backend development environment"

base_image: ghcr.io/terra-clan/sandbox-engine/code-server-go:latest

services:
  - postgres
  - redis

resources:
  cpu_limit: "2"
  memory_limit: "4Gi"
  cpu_request: "0.5"
  memory_request: "512Mi"
  disk_limit: "10Gi"

env:
  GO_ENV: development
  CGO_ENABLED: "0"

ttl: 4h

expose:
  - container: 8080
    protocol: tcp
    name: code
    public: true

  - container: 8000
    protocol: tcp
    name: app
    public: true

  - container: 2345
    protocol: tcp
    name: debug
    public: false

volumes:
  - name: workspace
    mount_path: /home/coder/workspace
    read_only: false
    size: "5Gi"

  - name: cache
    mount_path: /home/coder/.cache
    read_only: false
    size: "1Gi"

  - name: gopath
    mount_path: /home/coder/go
    read_only: false
    size: "2Gi"

commands:
  init: []

  start: []

  stop: []

  healthcheck: "curl -f http://localhost:8080/healthz || exit 1"

labels:
  category: backend
  language: go
  difficulty: intermediate
  use_case: hiring
