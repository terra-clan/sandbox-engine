# Node.js Backend Development Sandbox Template
# Used for hiring assessments and training tasks
# Uses code-server (VS Code in browser)

name: backend-node
description: "Node.js backend development environment with Express/NestJS"

base_image: ghcr.io/terra-clan/sandbox-engine/code-server-node:latest

services:
  - postgres
  - redis

resources:
  cpu_limit: "2"
  memory_limit: "4Gi"
  cpu_request: "0.5"
  memory_request: "512Mi"
  disk_limit: "10Gi"

env:
  NODE_ENV: development

ttl: 4h

expose:
  - container: 8080
    protocol: tcp
    name: code
    public: true

  - container: 3000
    protocol: tcp
    name: app
    public: true

  - container: 9229
    protocol: tcp
    name: debug
    public: false

volumes:
  - name: workspace
    mount_path: /home/coder/workspace
    read_only: false
    size: "5Gi"

  - name: cache
    mount_path: /home/coder/.cache
    read_only: false
    size: "1Gi"

commands:
  init: []

  start: []

  stop: []

  healthcheck: "curl -f http://localhost:8080/healthz || exit 1"

labels:
  category: backend
  language: node
  framework: express
  difficulty: intermediate
  use_case: hiring
